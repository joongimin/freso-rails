<%
if local_assigns.include?(:path)
  r = Rails.application.routes.recognize_path(path)
  if %w(no_locale_matched, no_route_matched).include?(r[:action])
    controller_path = controller.controller_path unless local_assigns.include?(:controller_path)
    action_name = controller.action_name unless local_assigns.include?(:action_name)
  else
    controller_path = r[:controller]
    action_name = r[:action]
  end
else
  path = request.fullpath.html_safe
  controller_path = controller.controller_path unless local_assigns.include?(:controller_path)
  action_name = controller.action_name unless local_assigns.include?(:action_name)
end
%>

freso.ajax_util.push("<%=j yield(:title) %>", "<%=j path %>");
freso.ajax_util.action("<%= controller_path %>", "<%= action_name %>");