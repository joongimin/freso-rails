<% if @brand.temporary_layout.nil? %>
  <%= javascript_tag do %>
    $(function () {
      freso.dialog.alert("Please select a layout template first", function () {
        window.location.href = "<%= select_layout_brand_path(@brand) %>";
      });
    });
  <% end %>
<% end %>
<table id="main_table">
  <tr>
    <td id="leftContainer">
      <div id="leftTop">
        <div id="leftTopButtonContainer">
          <div class="float_left">
            <%= link_to @brand, :target => "_blank" do %><button class="light_dark_button">저장된 디자인보기</button><% end %>
          </div>
          <div class="float_right">
            <%= link_to customize_tutorial_brand_path(@brand, :ref => "customize"), :remote => true do %><button class="green_button">저장</button><% end %>
            <%= link_to customize_tutorial_brand_path(@brand, :ref => "customize"), :remote => true do %><button class="dark_button">닫기</button><% end %>
          </div>
        </div>
      </div>
      <div class="bwEmbossLine"></div>
      <div id="leftEditElementContainer">
        <%= form_tag update_layout_option_brand_path(@brand), :remote => true, :method => :put, :style => "display: none;", :id => "update_layout_option" do %>
          <div class="fields"></div>
        <% end %>
        <% if @brand.temporary_layout %>
          <%= nested_form_for @brand.temporary_layout, :builder => EditorFormBuilder, :html => {:id => "form_editor"} do |f| %>
            <ul class="layout_sections">
              <%= f.fields_for :layout_sections do |s| %>
                <% if s.object.layout_options.size > 0 %>
                  <li class="layout_section">
                    <%= content_tag :div, "- #{s.object.key}", :class => "layout_section_title" %>
                    <div class="layout_section_value">
                      <ul class="layout_options">
                        <%= s.fields_for :layout_options do |o| %>
                          <li class="layout_option">
                            <%= content_tag :div, o.object.key, :class => "layout_option_title" %>
                            <div class="layout_option_value">
                              <% case o.object.option_type %>
                              <% when "css@font-family" %>
                                <%= o.select :value, Font.all.collect{|f| [Font.val(f), Font.val(f)]} %>
                              <% when "css@font-size" %>
                                <%= o.text_field :value, :class => "inputbox" %>
                              <% when "css@background-color" %>
                                <div class="editor">
                                  <div class="editor_section">
                                    Image <button class="grayButton">Select Image</button>
                                  </div>
                                  <div class="editor_section">
                                    <div class="editor_section_title">Tile</div>
                                    <div class="editor_section_value">
                                      <% BackgroundImageAlign.each do |k, v| %>
                                        <%= o.radio_button :value, v, :label => BackgroundImageAlign.t(k) %>
                                      <% end %>
                                      <div class="checkbox_item"><div class="radio"></div><span class="checkbox_title">Tile</span></div>
                                      <div class="checkbox_item"><div class="radio"></div><span class="checkbox_title">Normal</span></div>
                                    </div>
                                  </div>
                                  <div class="editor_section">
                                    <div class="editor_section_title">Color</div>
                                    <div class="editor_section_value">
                                      <%= o.text_field :value, :class => "inputbox" %>
                                    </div>
                                  </div>
                                </div>
                              <% when "array" %>
                                Array
                              <% end %>
                            </div>
                          </li>
                        <% end %>
                      </ul>
                    </div>
                  </li>
                <% end %>
              <% end %>
            </ul>
          <% end %>
        <% end %>
        <div id="leftEditElement">
          <div class="lineContainer">
            <div class="radio"></div>
            <div class="radio"><div class="radioSelected"></div></div>
              <div class="checkBox"></div>
              <div class="checkBox"><div class="checkBoxSelected"></div></div>
          </div>
          <div class="bwEmbossLine"></div>
          <div class="lineContainer">
            <button class="grayButton">버튼입니다</button>&nbsp;&nbsp;
            <button class="grayButton CircleButton">동그래요</button>&nbsp;&nbsp;
            <button class="grayButton cicle">&nbsp;</button>&nbsp;&nbsp;
            <button class="grayButton square">&nbsp;</button>
          </div>
          <div class="lineContainer">
            <input type="text" value="입력하세요" class="inputbox" />
            <button class="grayButton">색은</button>
              <button class="colorButtonColor colorButton">c</button>
              <button class="colorButtonColorChange colorButton">d</button>
          </div>
          <div class="bwEmbossLine"></div>
        </div>
      </div>
    </td>
    <td id="rightContainer">
      <%= content_tag :iframe, nil, :id => "preview", :src => preview_brand_path(@brand) %>
    </td>
  </tr>
</table>